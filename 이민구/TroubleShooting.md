##  DB 설계 트러블슈팅 정리

### 1. 캠핑장과 게시글 분리 불필요 → 통합
- **문제**: 캠핑장 정보 게시글을 별도 테이블로 분리했으나, 역할이 중복됨.
- **원인**: 캠핑장에 대한 정보를 “게시글(post)” 형식으로 관리하려 함.
- **해결**: 게시글 테이블을 제거하고, 캠핑장(`campsite`) 테이블에 소개·설명 컬럼을 통합.
- **결과**: 데이터 구조 단순화 및 관리 일관성 확보.

---

### 2. 재고관리 테이블 필요
- **문제**: 날짜별 예약 및 재고 상태 추적이 어려움.
- **원인**: 캠핑존 단위로만 예약을 관리함.
- **해결**: `campsite_stock` 테이블을 추가하여 **재고 관리**.
- **결과**: 예약 중복 방지 및 성능 향상.

---

### 3. 캠핑장 상세정보 테이블 필요
- **문제**: 캠핑장마다 숙박 가능 인원, 편의시설, 매너타임 등 세부정보를 표현하기 어려움.
- **원인**: `campsite` 테이블이 핵심 정보(이름, 위치, 전화번호 등)에 집중되어 세부 데이터 저장 한계가 있음.
- **해결**: `campsite_detail` 테이블을 분리하여 환경, 숙박 가능 수 등 관리.
- **결과**: 캠핑장 데이터 구조 확장성 향상 및 관리 효율성 확보.

---

### 4. 사업자 ID 과한 기능 제거
- **문제**: 일반 사용자와 사업자 기능이 섞이면서 복잡도 증가.
- **원인**: `business_id`를 모든 사용자 데이터에 포함.
- **해결**: `business_id` 컬럼 제거, 필요 시 `business_info` 별도 테이블 구성.
- **결과**: MVP 기능 단순화, 사용자 모델 구조 명확화.

---

### 5. Media 테이블 FK 과다 문제
- **문제**: 여러 테이블에서 `media_id` FK가 과도하게 생성됨.
- **원인**: 각각의 테이블이 이미지/영상 참조를 개별적으로 처리.
- **해결**: `media` 테이블에 `related_type`, `related_id` 컬럼 추가하여 **다형성 관계(polymorphic)** 로 전환.
- **결과**: FK 난립 방지, 관리 효율성 향상.

---

### 6. 카테고리 중간테이블 구조 문제
- **문제**: `category`, `category_detail`, `campsite` 관계가 혼동됨.
- **원인**: 중간테이블 설계가 불명확해 N:M 관계 처리 어려움.
- **해결**: `camping_category_detail` 중간테이블로 명확히 정리.
- **결과**: 계층형 카테고리 구조 확립 및 관계 명확화.

---

### 7. Datetime → Timestamp 방식 변경
- **문제**: `created_at`, `updated_at` 컬럼을 `DATETIME`으로 설정했을 때, 서버·로컬 간 **시간대(TimeZone)** 불일치 문제 발생.
- **원인**: `DATETIME`은 시간대를 고려하지 않아, AWS RDS(UTC)와 로컬(Asia/Seoul) 환경 간 시간 오차가 발생함.
- **해결**: 모든 시간 컬럼(`created_at`, `updated_at`, `deleted_at` 등)을 `TIMESTAMP`로 변경하고  
  `DEFAULT CURRENT_TIMESTAMP`, `ON UPDATE CURRENT_TIMESTAMP` 옵션을 적용하여 자동 갱신되도록 설정.
- **결과**:
    - 서버 간 시간 일관성 확보
    - 레코드 생성 및 수정 시각 자동 관리
    - 코드 레벨에서 불필요한 시간 변환 로직 제거로 유지보수성 향상

---